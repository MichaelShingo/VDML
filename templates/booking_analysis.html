{% extends 'base.html' %}
{% block head %}
{% endblock %}
{% block body %}
    <h1>Booking Analysis <i class="fa fa-circle-info" id="info-button"></i></h1>
    <div class="row">
        <div class="col-2"></div>
        <div class="col-8">
            <h2>Upload a CSV file</h2>
            {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                <h3 class="alert">{{ message }}</h3>
                {% endfor %}
            {% endif %}
            {% endwith %}
            <form method="POST" enctype="multipart/form-data">
                {{form.hidden_tag()}}
                {{form.file()}}
                {{form.submit()}}
            </form>
        </div>
        <div class="col-2"></div>
    </div>
    <div class="dialogue" id="info-dialogue" style="visibility: hidden">
        <div id="chart-x-mark" class="x-mark"><i class="fa fa-xmark fa-2x"></i></div>
        <div class="col-2"></div>
        <div class="col-8">
            <h2>Information</h2>
            <ol>
                <li>This page takes a CSV file of booking information, extracted from connect2, calculates various data points, and displays them in several charts.</li>
                <li>In connect2, navigate to the "Find Bookings" tab.</li>
                <li>On the right-hand column, select a date range or other filtering options as desired.</li>
                <li>Click "Export to Excel" at the bottom of the column.</li>
                <li>This will generate and download a CSV file. Upload this to the VDML app by clicking "Choose File". Do not edit the CSV file in another program, this may change the encoding format of the file, resulting in an error in processing.</li>
                <li>Click "Upload File" and the charts will be generated.</li>
                <li>Click the green buttons to choose which chart to view. Hover over the chart contents to see precise numbers.</li>
            </ol>
        </div>
        <div class="col-2"></div>
    </div>
    <script>
        const xMark = document.getElementById('chart-x-mark');
        const dialogue = document.getElementById('info-dialogue');
        xMark.addEventListener('click', () => {
            dialogue.style.visibility = 'hidden';
        })
    </script>
{% endblock %}